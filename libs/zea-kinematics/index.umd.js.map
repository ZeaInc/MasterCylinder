{"version":3,"file":"index.umd.js","sources":["../src/ExplodePartsOperator.js","../src/GearsOperator.js","../src/PistonOperator.js","../src/AimOperator.js","../src/RamAndPistonOperator.js","../src/TriangleIKSolver.js","../src/CCDIKSolver.js","../src/AttachmentConstraint.js","../src/Tracks/BaseTrack.js","../src/Tracks/ColorTrack.js","../src/Tracks/XfoTrack.js","../src/Tracks/AddKeyChange.js","../src/Tracks/KeyChange.js","../src/Tracks/TrackSampler.js","../src/Tracks/XfoTrackDisplay.js","../src/Tracks/RemoveKeyChange.js","../src/index.js"],"sourcesContent":["import {\r\n  MathFunctions,\r\n  Vec2,\r\n  Vec3,\r\n  BooleanParameter,\r\n  NumberParameter,\r\n  Vec2Parameter,\r\n  Vec3Parameter,\r\n  ListParameter,\r\n  StructParameter,\r\n  TreeItemParameter,\r\n  Operator,\r\n  OperatorOutput,\r\n  OperatorOutputMode,\r\n  Registry,\r\n} from '@zeainc/zea-engine'\r\n\r\n/** Class representing an explode part parameter.\r\n * @extends StructParameter\r\n * @private\r\n */\r\nclass ExplodePartParameter extends StructParameter {\r\n  /**\r\n   * Create an explode part parameter.\r\n   * @param {string} name - The name value.\r\n   */\r\n  constructor(name) {\r\n    super(name)\r\n\r\n    this.__stageParam = this.addMember(new NumberParameter('Stage', 0))\r\n    this.__axisParam = this.addMember(new Vec3Parameter('Axis', new Vec3(1, 0, 0)))\r\n\r\n    // The Movement param enables fine level timing to be set per part.\r\n    this.__movementParam = this.addMember(\r\n      new Vec2Parameter('MovementTiming', new Vec2(0, 1), [new Vec2(0, 0), new Vec2(1, 1)])\r\n    )\r\n    this.__multiplierParam = this.addMember(new NumberParameter('Multiplier', 1.0))\r\n  }\r\n\r\n  /**\r\n   * The getStage method.\r\n   * @return {any} - The return value.\r\n   */\r\n  getStage() {\r\n    return this.__stageParam.getValue()\r\n  }\r\n\r\n  /**\r\n   * The setStage method.\r\n   * @param {any} stage - The stage value.\r\n   */\r\n  setStage(stage) {\r\n    this.__stageParam.setValue(stage)\r\n  }\r\n\r\n  /**\r\n   * The getOutput method.\r\n   * @return {any} - The return value.\r\n   */\r\n  getOutput() {\r\n    return this.__output\r\n  }\r\n\r\n  /**\r\n   * The evaluate method.\r\n   * @param {any} explode - The explode value.\r\n   * @param {any} explodeDist - The distance that the parts explode to.\r\n   * @param {any} offset - The offset value.\r\n   * @param {any} stages - The stages value.\r\n   * @param {any} cascade - In \"cascade\" mode, the parts move in a cascade.\r\n   * @param {any} centered - The centered value.\r\n   * @param {Xfo} parentXfo - The parentXfo value.\r\n   * @param {any} parentDelta - The parentDelta value.\r\n   */\r\n  evaluate(explode, explodeDist, offset, stages, cascade, centered, parentXfo, parentDelta) {\r\n    // Note: during interactive setup of the operator we\r\n    // can have evaluations before anhthing is connected.\r\n    if (!this.__output.isConnected()) return\r\n\r\n    const stage = this.__stageParam.getValue()\r\n    const movement = this.__movementParam.getValue()\r\n    let dist\r\n    if (cascade) {\r\n      // In 'cascade' mode, the parts move in a cascade,\r\n      // starting with stage 0. then 1 ...\r\n      let t = stage / stages\r\n      if (centered) t -= 0.5\r\n      dist = explodeDist * MathFunctions.linStep(movement.x, movement.y, Math.max(0, explode - t))\r\n    } else {\r\n      // Else all the parts are spread out across the explode distance.\r\n      let t = 1.0 - stage / stages\r\n      if (centered) t -= 0.5\r\n      dist = explodeDist * MathFunctions.linStep(movement.x, movement.y, explode) * t\r\n    }\r\n    dist += offset\r\n\r\n    let explodeDir = this.__axisParam.getValue()\r\n    const multiplier = this.__multiplierParam.getValue()\r\n    let xfo = this.__output.getValue()\r\n    if (parentXfo) {\r\n      xfo = parentDelta.multiply(xfo)\r\n      explodeDir = parentXfo.ori.rotateVec3(explodeDir)\r\n    }\r\n    xfo.tr.addInPlace(explodeDir.scale(dist * multiplier))\r\n    this.__output.setClean(xfo)\r\n  }\r\n\r\n  // ////////////////////////////////////////\r\n  // Persistence\r\n\r\n  /**\r\n   * The toJSON method encodes this type as a json object for persistence.\r\n   * @param {object} context - The context value.\r\n   * @return {object} - Returns the json object.\r\n   */\r\n  toJSON(context) {\r\n    const j = super.toJSON(context)\r\n    if (j) {\r\n      j.output = this.__output.toJSON(context)\r\n    }\r\n    return j\r\n  }\r\n\r\n  /**\r\n   * The fromJSON method decodes a json object for this type.\r\n   * @param {object} j - The json object this item must decode.\r\n   * @param {object} context - The context value.\r\n   */\r\n  fromJSON(j, context) {\r\n    super.fromJSON(j, context)\r\n    if (j.output) {\r\n      this.__output.fromJSON(j.output, context)\r\n    }\r\n  }\r\n}\r\n\r\n/** Class representing an explode parts operator.\r\n * @extends ParameterOwner\r\n */\r\nclass ExplodePartsOperator extends Operator {\r\n  /**\r\n   * Create an explode parts operator.\r\n   * @param {string} name - The name value.\r\n   */\r\n  constructor(name) {\r\n    super(name)\r\n\r\n    this.__stagesParam = this.addParameter(new NumberParameter('Stages', 0))\r\n    this._explodeParam = this.addParameter(new NumberParameter('Explode', 0.0, [0, 1]))\r\n    this._distParam = this.addParameter(new NumberParameter('Dist', 1.0))\r\n    this._offsetParam = this.addParameter(new NumberParameter('Offset', 0))\r\n    this._cascadeParam = this.addParameter(new BooleanParameter('Cascade', false))\r\n    this._centeredParam = this.addParameter(new BooleanParameter('Centered', false))\r\n    this.__parentItemParam = this.addParameter(new TreeItemParameter('RelativeTo'))\r\n    this.__parentItemParam.on('valueChanged', () => {\r\n      // compute the local xfos\r\n      const parentItem = this.__parentItemParam.getValue()\r\n      if (parentItem) this.__invParentSpace = parentItem.getParameter('GlobalXfo').getValue().inverse()\r\n      else this.__invParentSpace = undefined\r\n    })\r\n    this.__parentItemParam.on('treeItemGlobalXfoChanged', () => {\r\n      this.setDirty()\r\n    })\r\n\r\n    this.__itemsParam = this.addParameter(new ListParameter('Parts', ExplodePartParameter))\r\n    this.__itemsParam.on('elementAdded', (event) => {\r\n      if (event.index > 0) {\r\n        const prevStage = this.__itemsParam.getElement(event.index - 1).getStage()\r\n        event.elem.setStage(prevStage + 1)\r\n        this.__stagesParam.setValue(prevStage + 2)\r\n      } else {\r\n        this.__stagesParam.setValue(1)\r\n      }\r\n      event.elem.__output = new OperatorOutput('Part' + event.index, OperatorOutputMode.OP_READ_WRITE)\r\n      this.addOutput(event.elem.getOutput())\r\n      this.setDirty()\r\n    })\r\n    this.__itemsParam.on('elementRemoved', (event) => {\r\n      this.removeOutput(event.elem.getOutput())\r\n    })\r\n    this.addParameter(this.__itemsParam)\r\n\r\n    this.__localXfos = []\r\n    this.__parts = []\r\n    this.__stages = 2\r\n  }\r\n\r\n  addPart() {\r\n    const part = new ExplodePartParameter()\r\n    this.__itemsParam.addElement(part)\r\n    return part\r\n  }\r\n\r\n  /**\r\n   * The evaluate method.\r\n   */\r\n  evaluate() {\r\n    // console.log(`Operator: evaluate: ${this.getName()}`)\r\n    const stages = this.__stagesParam.getValue()\r\n    const explode = this._explodeParam.getValue()\r\n    // const explodeDir = this.getParameter('Axis').getValue();\r\n    const explodeDist = this._distParam.getValue()\r\n    const offset = this._offsetParam.getValue()\r\n    const cascade = this._cascadeParam.getValue()\r\n    const centered = this._centeredParam.getValue()\r\n    const parentItem = this.__parentItemParam.getValue()\r\n    let parentXfo\r\n    let parentDelta\r\n    if (parentItem) {\r\n      parentXfo = parentItem.getParameter('GlobalXfo').getValue()\r\n      parentDelta = this.__invParentSpace.multiply(parentXfo)\r\n    }\r\n\r\n    const items = this.__itemsParam.getValue()\r\n    for (let i = 0; i < items.length; i++) {\r\n      const part = items[i]\r\n      part.evaluate(explode, explodeDist, offset, stages, cascade, centered, parentXfo, parentDelta)\r\n    }\r\n  }\r\n\r\n  // ////////////////////////////////////////\r\n  // Persistence\r\n\r\n  /**\r\n   * The toJSON method encodes this type as a json object for persistence.\r\n   *\r\n   * @param {object} context - The context value.\r\n   * @return {object} - Returns the json object.\r\n   */\r\n  toJSON(context) {\r\n    return super.toJSON(context)\r\n  }\r\n\r\n  /**\r\n   * The fromJSON method decodes a json object for this type.\r\n   * @param {object} j - The json object this item must decode.\r\n   * @param {object} context - The context value.\r\n   */\r\n  fromJSON(j, context) {\r\n    super.fromJSON(j, context)\r\n  }\r\n}\r\n\r\nRegistry.register('ExplodePartsOperator', ExplodePartsOperator)\r\n\r\nexport { ExplodePartsOperator }\r\n","import {\r\n  MathFunctions,\r\n  Vec2,\r\n  Vec3,\r\n  Quat,\r\n  NumberParameter,\r\n  Vec3Parameter,\r\n  ListParameter,\r\n  StructParameter,\r\n  Operator,\r\n  OperatorOutput,\r\n  OperatorOutputMode,\r\n  Registry,\r\n} from '@zeainc/zea-engine'\r\n\r\n/** Class representing a gear parameter.\r\n * @extends StructParameter\r\n */\r\nclass GearParameter extends StructParameter {\r\n  /**\r\n   * Create a gear parameter.\r\n   * @param {string} name - The name value.\r\n   */\r\n  constructor(name) {\r\n    super(name)\r\n\r\n    this.__ratioParam = this.addMember(new NumberParameter('Ratio', 1.0))\r\n    this.__offsetParam = this.addMember(new NumberParameter('Offset', 0.0))\r\n    this.__axisParam = this.addMember(new Vec3Parameter('Axis', new Vec3(1, 0, 0)))\r\n  }\r\n\r\n  /**\r\n   * The getOutput method.\r\n   * @return {any} - The return value.\r\n   */\r\n  getOutput() {\r\n    return this.__output\r\n  }\r\n\r\n  /**\r\n   * Getter for the gear ratio.\r\n   * @return {number} - Returns the ratio.\r\n   */\r\n  getRatio() {\r\n    return this.__ratioParam.getValue()\r\n  }\r\n\r\n  /**\r\n   * getter for the gear offset.\r\n   * @return {number} - Returns the offset.\r\n   */\r\n  getOffset() {\r\n    return this.__offsetParam.getValue()\r\n  }\r\n\r\n  /**\r\n   * The getAxis method.\r\n   * @return {any} - The return value.\r\n   */\r\n  getAxis() {\r\n    return this.__axisParam.getValue()\r\n  }\r\n\r\n  // ////////////////////////////////////////\r\n  // Persistence\r\n\r\n  /**\r\n   * The toJSON method encodes this type as a json object for persistence.\r\n   * @param {object} context - The context value.\r\n   * @return {object} - Returns the json object.\r\n   */\r\n  toJSON(context) {\r\n    const j = super.toJSON(context)\r\n    if (j) {\r\n      j.output = this.__output.toJSON(context)\r\n    }\r\n    return j\r\n  }\r\n\r\n  /**\r\n   * The fromJSON method decodes a json object for this type.\r\n   * @param {object} j - The json object this item must decode.\r\n   * @param {object} context - The context value.\r\n   */\r\n  fromJSON(j, context) {\r\n    super.fromJSON(j, context)\r\n    if (j.output) {\r\n      this.__output.fromJSON(j.output, context)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Class representing a gears operator.\r\n *\r\n * @extends Operator\r\n */\r\nclass GearsOperator extends Operator {\r\n  /**\r\n   * Create a gears operator.\r\n   * @param {string} name - The name value.\r\n   */\r\n  constructor(name) {\r\n    super(name)\r\n\r\n    this.__revolutionsParam = this.addParameter(new NumberParameter('Revolutions', 0.0))\r\n    const rpmParam = this.addParameter(new NumberParameter('RPM', 0.0)) // revolutions per minute\r\n    this.__timeoutId\r\n    rpmParam.on('valueChanged', () => {\r\n      const rpm = rpmParam.getValue()\r\n      if (Math.abs(rpm) > 0.0) {\r\n        if (!this.__timeoutId) {\r\n          const timerCallback = () => {\r\n            const rpm = rpmParam.getValue()\r\n            const revolutions = this.__revolutionsParam.getValue()\r\n            this.__revolutionsParam.setValue(revolutions + rpm * (1 / (50 * 60)))\r\n            this.__timeoutId = setTimeout(timerCallback, 20) // Sample at 50fps.\r\n          }\r\n          timerCallback()\r\n        }\r\n      } else {\r\n        clearTimeout(this.__timeoutId)\r\n        this.__timeoutId = undefined\r\n      }\r\n    })\r\n    this.__gearsParam = this.addParameter(new ListParameter('Gears', GearParameter))\r\n    this.__gearsParam.on('elementAdded', (event) => {\r\n      event.elem.__output = new OperatorOutput('Gear' + event.index, OperatorOutputMode.OP_READ_WRITE)\r\n      this.addOutput(event.elem.getOutput())\r\n    })\r\n    this.__gearsParam.on('elementRemoved', (event) => {\r\n      this.removeOutput(event.index)\r\n    })\r\n\r\n    this.__gears = []\r\n  }\r\n\r\n  addGear() {\r\n    const part = new GearParameter()\r\n    this.__gearsParam.addElement(part)\r\n    return part\r\n  }\r\n\r\n  /**\r\n   * The evaluate method.\r\n   */\r\n  evaluate() {\r\n    // console.log(`Operator: evaluate: ${this.getName()}`)\r\n    const revolutions = this.__revolutionsParam.getValue()\r\n    const gears = this.__gearsParam.getValue()\r\n    gears.forEach((gear, index) => {\r\n      const output = this.getOutputByIndex(index)\r\n\r\n      // Note: we have cases where we have interdependencies.\r\n      // Operator A Writes to [A, B, C]\r\n      // Operator B Writes to [A, B, C].\r\n      // During the load of operator B.C, we trigger an evaluation\r\n      // of Operator A, which causes B to evaluate (due to B.A already connected)\r\n      // Now operator B is evaluating will partially setup.\r\n      // See SmartLoc: Exploded Parts and Gears read/write the same set of\r\n      // params.\r\n      if (!output.isConnected()) return\r\n\r\n      const rot = revolutions * gear.getRatio() + gear.getOffset()\r\n\r\n      const quat = new Quat()\r\n      quat.setFromAxisAndAngle(gear.getAxis(), rot * Math.PI * 2.0)\r\n      const xfo = output.getValue()\r\n      xfo.ori = quat.multiply(xfo.ori)\r\n      output.setClean(xfo)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * The detach method.\r\n   */\r\n  detach() {\r\n    super.detach()\r\n    if (this.__timeoutId) {\r\n      clearTimeout(this.__timeoutId)\r\n      this.__timeoutId = null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The reattach method.\r\n   */\r\n  reattach() {\r\n    super.reattach()\r\n\r\n    // Restart the operator.\r\n    this.getParameter('RPM').emit('valueChanged', {})\r\n  }\r\n\r\n  /**\r\n   * The destroy is called by the system to cause explicit resources cleanup.\r\n   * Users should never need to call this method directly.\r\n   */\r\n  destroy() {\r\n    if (this.__timeoutId) {\r\n      clearTimeout(this.__timeoutId)\r\n      this.__timeoutId = null\r\n    }\r\n    super.destroy()\r\n  }\r\n}\r\n\r\nRegistry.register('GearsOperator', GearsOperator)\r\n\r\nexport { GearsOperator }\r\n","import {\r\n  MathFunctions,\r\n  Vec3,\r\n  Quat,\r\n  Xfo,\r\n  NumberParameter,\r\n  Vec3Parameter,\r\n  ListParameter,\r\n  StructParameter,\r\n  Operator,\r\n  OperatorOutput,\r\n  OperatorOutputMode,\r\n  Registry\r\n} from '@zeainc/zea-engine'\r\n\r\n/** Class representing a piston parameter.\r\n * @extends StructParameter\r\n */\r\nclass PistonParameter extends StructParameter {\r\n  /**\r\n   * Create a piston parameter.\r\n   * @param {string} name - The name value.\r\n   */\r\n  constructor() {\r\n    super('Piston')\r\n\r\n    // this.__pistonAxisParam = this._addMember(new Vec('Axis', 0));\r\n    this.__pistonAngleParam = this._addMember(new NumberParameter('PistonAngle', 0))\r\n    this.__camPhaseParam = this._addMember(new NumberParameter('CamPhase', 0))\r\n    this.__camLengthParam = this._addMember(new NumberParameter('CamLength', 3))\r\n    this.__rodLengthParam = this._addMember(new NumberParameter('RodLength', 3))\r\n\r\n    // The first RodItem added causes the rodOffset to be computed.\r\n    this.__rodOutput = new OperatorOutput('Rod', OperatorOutputMode.OP_READ_WRITE)\r\n    this.__capOutput = new OperatorOutput('Cap', OperatorOutputMode.OP_READ_WRITE)\r\n\r\n    this.__pistonAngleParam.on('valueChanged', this.init.bind(this))\r\n    this.__camPhaseParam.on('valueChanged', this.init.bind(this))\r\n    this.__camLengthParam.on('valueChanged', this.init.bind(this))\r\n    this.__rodLengthParam.on('valueChanged', this.init.bind(this))\r\n\r\n    this.__bindXfos = {}\r\n  }\r\n\r\n  /**\r\n   * The getRodOutput method.\r\n   * @return {any} - The return value.\r\n   */\r\n  getRodOutput() {\r\n    return this.__rodOutput\r\n  }\r\n\r\n  /**\r\n   * The getCapOutput method.\r\n   * @return {any} - The return value.\r\n   */\r\n  getCapOutput() {\r\n    return this.__capOutput\r\n  }\r\n\r\n  /**\r\n   * The setCrankXfo method.\r\n   * @param {Xfo} baseCrankXfo - The baseCrankXfo value.\r\n   */\r\n  setCrankXfo(baseCrankXfo) {\r\n    this.__baseCrankXfo = baseCrankXfo\r\n    this.init()\r\n  }\r\n\r\n  /**\r\n   * The init method.\r\n   */\r\n  init() {\r\n    if (!this.__baseCrankXfo) return\r\n\r\n    const camPhase = this.__camPhaseParam.getValue()\r\n    const camLength = this.__camLengthParam.getValue()\r\n    const rodLength = this.__rodLengthParam.getValue()\r\n    const pistonAngle = this.__pistonAngleParam.getValue()\r\n    const crankVec = new Vec3(\r\n      Math.sin(MathFunctions.degToRad(pistonAngle)),\r\n      Math.cos(MathFunctions.degToRad(pistonAngle)),\r\n      0.0\r\n    )\r\n    this.__pistonAxis = this.__baseCrankXfo.ori.rotateVec3(crankVec)\r\n\r\n    this.__camVec = this.__baseCrankXfo.ori.rotateVec3(\r\n      new Vec3(Math.sin(camPhase * 2.0 * Math.PI) * camLength, Math.cos(camPhase * 2.0 * Math.PI) * camLength, 0.0)\r\n    )\r\n\r\n    const camAngle = camPhase * 2.0 * Math.PI\r\n    const bigEndOffset = Math.sin(camAngle) * camLength\r\n    const headOffset = Math.sqrt(rodLength * rodLength - bigEndOffset * bigEndOffset) + Math.cos(camAngle) * camLength\r\n    this.__pistonOffset = headOffset\r\n  }\r\n\r\n  /**\r\n   * The evaluate method.\r\n   * @param {Quat} quat - The quat value.\r\n   * @param {any} crankAxis - The crankAxis value.\r\n   * @param {any} revolutions - The revolutions value.\r\n   */\r\n  evaluate(quat, crankAxis, revolutions) {\r\n    const camPhase = this.__camPhaseParam.getValue()\r\n    const camLength = this.__camLengthParam.getValue()\r\n    const rodLength = this.__rodLengthParam.getValue()\r\n    const camAngle = (camPhase + revolutions) * 2.0 * Math.PI\r\n\r\n    const bigEndOffset = Math.sin(camAngle) * camLength\r\n    const rodAngle = Math.asin(bigEndOffset / rodLength)\r\n    const headOffset = Math.sqrt(rodLength * rodLength - bigEndOffset * bigEndOffset) + Math.cos(camAngle) * camLength\r\n\r\n    if (this.__rodOutput.isConnected()) {\r\n      const rodXfo = this.__rodOutput.getValue()\r\n      const axisPos = rodXfo.tr.subtract(this.__baseCrankXfo.tr).dot(crankAxis)\r\n\r\n      const rotRotation = new Quat()\r\n      rotRotation.setFromAxisAndAngle(crankAxis, -rodAngle)\r\n\r\n      rodXfo.tr = this.__baseCrankXfo.tr.add(quat.rotateVec3(this.__camVec))\r\n      rodXfo.tr.addInPlace(crankAxis.scale(axisPos))\r\n      rodXfo.ori = rotRotation.multiply(rodXfo.ori)\r\n      this.__rodOutput.setValue(rodXfo)\r\n    }\r\n\r\n    if (this.__capOutput.isConnected()) {\r\n      const headXfo = this.__capOutput.getValue()\r\n      headXfo.tr = headXfo.tr.add(this.__pistonAxis.scale(headOffset - this.__pistonOffset))\r\n      this.__capOutput.setValue(headXfo)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The setOwner method.\r\n   * @param {any} owner - The owner value.\r\n   */\r\n  setOwner(owner) {\r\n    this.__owner = owner\r\n  }\r\n\r\n  /**\r\n   * The getOwner method.\r\n   * @return {any} - The return value.\r\n   */\r\n  getOwner() {\r\n    return this.__owner\r\n  }\r\n\r\n  // ////////////////////////////////////////\r\n  // Persistence\r\n\r\n  /**\r\n   * The toJSON method encodes this type as a json object for persistence.\r\n   * @param {object} context - The context value.\r\n   * @return {object} - Returns the json object.\r\n   */\r\n  toJSON(context) {\r\n    const j = super.toJSON(context)\r\n    return j\r\n  }\r\n\r\n  /**\r\n   * The fromJSON method decodes a json object for this type.\r\n   * @param {object} j - The json object this item must decode.\r\n   * @param {object} context - The context value.\r\n   */\r\n  fromJSON(j, context) {\r\n    super.fromJSON(j, context)\r\n  }\r\n\r\n  // ////////////////////////////////////////\r\n  // Clone\r\n\r\n  /**\r\n   * The clone method constructs a new piston parameter, copies its values\r\n   * from this parameter and returns it.\r\n   *\r\n   * @return {PistonParameter} - Returns a new cloned piston parameter.\r\n   */\r\n  clone() {\r\n    const clonedParam = new PistonParameter(this.__name, this.__value)\r\n    return clonedParam\r\n  }\r\n}\r\n\r\n/** Class representing a piston operator.\r\n * @extends Operator\r\n */\r\nclass PistonOperator extends Operator {\r\n  /**\r\n   * Create a piston operator.\r\n   * @param {string} name - The name value.\r\n   */\r\n  constructor(name) {\r\n    super(name)\r\n\r\n    this.__revolutionsParam = this.addParameter(new NumberParameter('Revolutions', 0.0, [0, 1]))\r\n    const rpmParam = this.addParameter(new NumberParameter('RPM', 0.0)) // revolutions per minute\r\n    const fps = 50\r\n    const sampleTime = 1000 / fps\r\n    const anglePerSample = 1 / (fps * 60)\r\n    rpmParam.on('valueChanged', () => {\r\n      let rpm = rpmParam.getValue()\r\n      if (rpm > 0.0) {\r\n        if (!this.__timeoutId) {\r\n          const timerCallback = () => {\r\n            rpm = rpmParam.getValue()\r\n            const revolutions = this.__revolutionsParam.getValue()\r\n            this.__revolutionsParam.setValue(revolutions + rpm * anglePerSample)\r\n            this.__timeoutId = setTimeout(timerCallback, sampleTime) // Sample at 50fps.\r\n          }\r\n          timerCallback()\r\n        }\r\n      } else {\r\n        clearTimeout(this.__timeoutId)\r\n        this.__timeoutId = undefined\r\n      }\r\n    })\r\n\r\n    // this.__crankParam = this.addParameter(new KinematicGroupParameter('Crank'));\r\n    this.__crankOutput = this.addOutput(new OperatorOutput('Crank', OperatorOutputMode.OP_READ_WRITE))\r\n    this.__crankOutput.on('paramSet', this.init.bind(this))\r\n    this.__crankAxisParam = this.addParameter(new Vec3Parameter('CrankAxis', new Vec3(1, 0, 0)))\r\n    this.__crankAxisParam.on('valueChanged', () => {\r\n      // this.__baseCrankXfo.ori.setFromAxisAndAngle(this.__crankAxisParam.getValue(), 0.0);\r\n      this.__baseCrankXfo.ori.setFromDirectionAndUpvector(this.__crankAxisParam.getValue(), new Vec3(0, 0, 1))\r\n      this.init()\r\n    })\r\n    this.__pistonsParam = this.addParameter(new ListParameter('Pistons', PistonParameter))\r\n    this.__pistonsParam.on('elementAdded', event => {\r\n      event.elem.setCrankXfo(this.__baseCrankXfo)\r\n\r\n      this.addOutput(event.elem.getRodOutput())\r\n      this.addOutput(event.elem.getCapOutput())\r\n    })\r\n    this.__pistonsParam.on('elementRemoved', event => {\r\n      this.removeOutput(event.elem.getRodOutput())\r\n      this.removeOutput(event.elem.getCapOutput())\r\n    })\r\n\r\n    this.__baseCrankXfo = new Xfo()\r\n    this.__pistons = []\r\n  }\r\n\r\n  /**\r\n   * The setOwner method.\r\n   * @param {any} ownerItem - The ownerItem value.\r\n   */\r\n  setOwner(ownerItem) {\r\n    super.setOwner(ownerItem)\r\n  }\r\n\r\n  /**\r\n   * The getCrankOutput method.\r\n   * @return {any} - The return value.\r\n   */\r\n  getCrankOutput() {\r\n    return this.__crankOutput\r\n  }\r\n\r\n  /**\r\n   * The init method.\r\n   */\r\n  init() {\r\n    const pistons = this.__pistonsParam.getValue()\r\n    for (const piston of pistons) piston.setCrankXfo(this.__baseCrankXfo)\r\n\r\n    if (this.__crankOutput.isConnected())\r\n      this.__crankOffset = this.__baseCrankXfo.inverse().multiply(this.__crankOutput.getValue())\r\n  }\r\n\r\n  /**\r\n   * The evaluate method.\r\n   */\r\n  evaluate() {\r\n    const revolutions = this.__revolutionsParam.getValue()\r\n    const crankAxis = this.__crankAxisParam.getValue()\r\n    const quat = new Quat()\r\n    quat.setFromAxisAndAngle(crankAxis, revolutions * Math.PI * 2.0)\r\n\r\n    if (this.__crankOutput.isConnected()) {\r\n      const crankXfo = this.__crankOutput.getValue()\r\n      crankXfo.ori = quat.multiply(crankXfo.ori)\r\n      this.__crankOutput.setValue(crankXfo)\r\n    }\r\n\r\n    const pistons = this.__pistonsParam.getValue()\r\n    const len = pistons.length\r\n    for (let i = 0; i < len; i++) {\r\n      const piston = pistons[i]\r\n      piston.evaluate(quat, crankAxis, revolutions)\r\n    }\r\n\r\n    this.emit('postEval', {})\r\n  }\r\n\r\n  // ////////////////////////////////////////\r\n  // Persistence\r\n\r\n  /**\r\n   * The toJSON method encodes this type as a json object for persistence.\r\n   *\r\n   * @param {object} context - The context value.\r\n   * @return {object} - Returns the json object.\r\n   */\r\n  toJSON(context) {\r\n    return super.toJSON(context)\r\n  }\r\n\r\n  /**\r\n   * The fromJSON method decodes a json object for this type.\r\n   *\r\n   * @param {object} j - The json object this item must decode.\r\n   * @param {object} context - The context value.\r\n   */\r\n  fromJSON(j, context) {\r\n    super.fromJSON(j, context)\r\n    if (j.crankOutput) {\r\n      this.__crankOutput.fromJSON(j.crankOutput, context)\r\n    }\r\n    this.init()\r\n  }\r\n\r\n  /**\r\n   * The destroy is called by the system to cause explicit resources cleanup.\r\n   * Users should never need to call this method directly.\r\n   */\r\n  destroy() {\r\n    clearTimeout(this.__timeoutId)\r\n    super.destroy()\r\n  }\r\n}\r\n\r\nRegistry.register('PistonOperator', PistonOperator)\r\n\r\nexport { PistonOperator }\r\n","import {\r\n  Quat,\r\n  NumberParameter,\r\n  MultiChoiceParameter,\r\n  XfoParameter,\r\n  Operator,\r\n  OperatorInput,\r\n  OperatorOutput,\r\n  OperatorOutputMode,\r\n  Registry\r\n} from '@zeainc/zea-engine'\r\n\r\n/** An operator for aiming items at targets.\r\n * @extends Operator\r\n */\r\nclass AimOperator extends Operator {\r\n  /**\r\n   * Create a gears operator.\r\n   * @param {string} name - The name value.\r\n   */\r\n  constructor(name) {\r\n    super(name)\r\n\r\n    this.addParameter(new NumberParameter('Weight', 1))\r\n    this.addParameter(\r\n      new MultiChoiceParameter('Axis', 0, ['+X Axis', '-X Axis', '+Y Axis', '-Y Axis', '+Z Axis', '-Z Axis'])\r\n    )\r\n\r\n    this.addParameter(new NumberParameter('Stretch', 0.0))\r\n    this.addParameter(new NumberParameter('Initial Dist', 1.0))\r\n    // this.addParameter(new XfoParameter('Target'))\r\n    this.addInput(new OperatorInput('Target'))\r\n    this.addOutput(new OperatorOutput('InputOutput', OperatorOutputMode.OP_READ_WRITE))\r\n  }\r\n\r\n  /**\r\n   * The resetStretchRefDist method.\r\n   */\r\n  resetStretchRefDist() {\r\n    const target = this.getInput('Target').getValue()\r\n    const output = this.getOutputByIndex(0)\r\n    const xfo = output.getValue()\r\n    const dist = target.tr.subtract(xfo.tr).length()\r\n    this.getParameter('Initial Dist').setValue(dist)\r\n  }\r\n\r\n  /**\r\n   * The evaluate method.\r\n   */\r\n  evaluate() {\r\n    const weight = this.getParameter('Weight').getValue()\r\n    const axis = this.getParameter('Axis').getValue()\r\n    const target = this.getInput('Target').getValue()\r\n    const output = this.getOutputByIndex(0)\r\n    const xfo = output.getValue()\r\n    const dir = target.tr.subtract(xfo.tr)\r\n    const dist = dir.length()\r\n    if (dist < 0.000001) return\r\n    dir.scaleInPlace(1 / dist)\r\n    let vec\r\n    switch (axis) {\r\n      case 0:\r\n        vec = xfo.ori.getXaxis()\r\n        break\r\n      case 1:\r\n        vec = xfo.ori.getXaxis().negate()\r\n        break\r\n      case 2:\r\n        vec = xfo.ori.getYaxis()\r\n        break\r\n      case 3:\r\n        vec = xfo.ori.getYaxis().negate()\r\n        break\r\n      case 4:\r\n        vec = xfo.ori.getZaxis()\r\n        break\r\n      case 5:\r\n        vec = xfo.ori.getZaxis().negate()\r\n        break\r\n    }\r\n    let align = new Quat()\r\n    align.setFrom2Vectors(vec, dir)\r\n    align.alignWith(new Quat())\r\n    if (weight < 1.0) align = new Quat().lerp(align, weight)\r\n    xfo.ori = align.multiply(xfo.ori)\r\n    const stretch = this.getParameter('Stretch').getValue()\r\n    if (stretch > 0.0) {\r\n      const initialDist = this.getParameter('Initial Dist').getValue()\r\n      // Scale the output to reach towards the target.\r\n      // Note: once the base xfo is re-calculated, then\r\n      // we can make this scale relative. (e.g. *= sc)\r\n      // This will happen once GalcGlibalXfo is the base\r\n      // operator applied to GlobalXfo param.\r\n      // Until then, we must reset scale manually here.\r\n      const sc = 1.0 + (dist / initialDist - 1.0) * stretch\r\n      switch (axis) {\r\n        case 0:\r\n        case 1:\r\n          xfo.sc.x = sc\r\n          break\r\n        case 2:\r\n        case 3:\r\n          xfo.sc.y = sc\r\n          break\r\n        case 4:\r\n        case 5:\r\n          xfo.sc.z = sc\r\n          break\r\n      }\r\n      // console.log(\"AimOperator.evaluate:\", xfo.sc.toString())\r\n    }\r\n    output.setClean(xfo)\r\n  }\r\n}\r\n\r\nRegistry.register('AimOperator', AimOperator)\r\n\r\nexport { AimOperator }\r\n","import { Quat, MultiChoiceParameter, Operator, OperatorOutput, OperatorOutputMode, Registry } from '@zeainc/zea-engine'\r\n\r\n/** An operator for aiming items at targets.\r\n * @extends Operator\r\n */\r\nclass RamAndPistonOperator extends Operator {\r\n  /**\r\n   * Create a gears operator.\r\n   * @param {string} name - The name value.\r\n   */\r\n  constructor(name) {\r\n    super(name)\r\n\r\n    this.addParameter(\r\n      new MultiChoiceParameter('Axis', 0, ['+X Axis', '-X Axis', '+Y Axis', '-Y Axis', '+Z Axis', '-Z Axis'])\r\n    )\r\n\r\n    this.addOutput(new OperatorOutput('Ram', OperatorOutputMode.OP_READ_WRITE))\r\n    this.addOutput(new OperatorOutput('Piston', OperatorOutputMode.OP_READ_WRITE))\r\n  }\r\n\r\n  /**\r\n   * The evaluate method.\r\n   */\r\n  evaluate() {\r\n    const ramOutput = this.getOutputByIndex(0)\r\n    const pistonOutput = this.getOutputByIndex(1)\r\n    const ramXfo = ramOutput.getValue()\r\n    const pistonXfo = pistonOutput.getValue()\r\n\r\n    const axis = this.getParameter('Axis').getValue()\r\n    const dir = pistonXfo.tr.subtract(ramXfo.tr)\r\n    dir.normalizeInPlace()\r\n\r\n    const alignRam = new Quat()\r\n    const alignPiston = new Quat()\r\n    let vec\r\n    switch (axis) {\r\n      case 0:\r\n        alignRam.setFrom2Vectors(ramXfo.ori.getXaxis(), dir)\r\n        alignPiston.setFrom2Vectors(pistonXfo.ori.getXaxis().negate(), dir)\r\n        break\r\n      case 1:\r\n        alignRam.setFrom2Vectors(ramXfo.ori.getXaxis().negate(), dir)\r\n        alignPiston.setFrom2Vectors(pistonXfo.ori.getXaxis(), dir)\r\n        break\r\n      case 2:\r\n        alignRam.setFrom2Vectors(ramXfo.ori.getYaxis(), dir)\r\n        alignPiston.setFrom2Vectors(pistonXfo.ori.getYaxis().negate(), dir)\r\n        break\r\n      case 3:\r\n        alignRam.setFrom2Vectors(ramXfo.ori.getYaxis().negate(), dir)\r\n        alignPiston.setFrom2Vectors(pistonXfo.ori.getYaxis(), dir)\r\n        break\r\n      case 4:\r\n        alignRam.setFrom2Vectors(ramXfo.ori.getZaxis(), dir)\r\n        alignPiston.setFrom2Vectors(pistonXfo.ori.getZaxis().negate(), dir)\r\n        break\r\n      case 5:\r\n        alignRam.setFrom2Vectors(ramXfo.ori.getZaxis().negate(), dir)\r\n        alignPiston.setFrom2Vectors(pistonXfo.ori.getZaxis(), dir)\r\n        break\r\n    }\r\n\r\n    ramXfo.ori = alignRam.multiply(ramXfo.ori)\r\n    pistonXfo.ori = alignPiston.multiply(pistonXfo.ori)\r\n\r\n    ramOutput.setClean(ramXfo)\r\n    pistonOutput.setClean(pistonXfo)\r\n  }\r\n}\r\n\r\nRegistry.register('RamAndPistonOperator', RamAndPistonOperator)\r\n\r\nexport { RamAndPistonOperator }\r\n","import { Quat, Operator, OperatorInput, OperatorOutput, OperatorOutputMode, Registry } from '@zeainc/zea-engine'\r\n\r\n/** An operator for aiming items at targets.\r\n * @extends Operator\r\n */\r\nclass TriangleIKSolver extends Operator {\r\n  /**\r\n   * Create a gears operator.\r\n   * @param {string} name - The name value.\r\n   */\r\n  constructor(name) {\r\n    super(name)\r\n    // this.addParameter(\r\n    //   new MultiChoiceParameter('Axis', 0, ['+X Axis', '-X Axis', '+Y Axis', '-Y Axis', '+Z Axis', '-Z Axis'])\r\n    // )\r\n    this.addInput(new OperatorInput('Target'))\r\n    this.addOutput(new OperatorOutput('Joint0', OperatorOutputMode.OP_READ_WRITE))\r\n    this.addOutput(new OperatorOutput('Joint1', OperatorOutputMode.OP_READ_WRITE))\r\n    this.align = new Quat()\r\n    this.enabled = false\r\n  }\r\n\r\n  enable() {\r\n    const targetXfo = this.getInput('Target').getValue()\r\n    const joint0Xfo = this.getOutput('Joint0').getValue()\r\n    const joint1Xfo = this.getOutput('Joint1').getValue()\r\n    this.joint1Offset = joint0Xfo.inverse().multiply(joint1Xfo).tr\r\n    this.joint1TargetOffset = joint1Xfo.inverse().multiply(targetXfo).tr\r\n    this.joint1TargetOffset.normalizeInPlace()\r\n    this.joint0Length = joint1Xfo.tr.distanceTo(joint0Xfo.tr)\r\n    this.joint1Length = targetXfo.tr.distanceTo(joint1Xfo.tr)\r\n    this.setDirty()\r\n    this.enabled = true\r\n  }\r\n\r\n  /**\r\n   * The evaluate method.\r\n   */\r\n  evaluate() {\r\n    const targetXfo = this.getInput('Target').getValue()\r\n    const joint0Output = this.getOutput('Joint0')\r\n    const joint1Output = this.getOutput('Joint1')\r\n    const joint0Xfo = joint0Output.getValue()\r\n    const joint1Xfo = joint1Output.getValue()\r\n\r\n    ///////////////////////////////\r\n    // Calc joint0Xfo\r\n    const joint0TargetVec = targetXfo.tr.subtract(joint0Xfo.tr)\r\n    const joint0TargetDist = joint0TargetVec.length()\r\n    const joint01Vec = joint0Xfo.ori.rotateVec3(this.joint1Offset)\r\n\r\n    // Calculate the angle using the rule of cosines.\r\n    // cos C\t= (a2 + b2 − c2)/2ab\r\n    const a = this.joint0Length\r\n    const b = joint0TargetDist\r\n    const c = this.joint1Length\r\n    const angle = Math.acos((a * a + b * b - c * c) / (2 * a * b))\r\n\r\n    // console.log(currAngle, angle)\r\n\r\n    joint01Vec.normalizeInPlace()\r\n    joint0TargetVec.normalizeInPlace()\r\n\r\n    const Joint0Axis = joint0TargetVec.cross(joint01Vec)\r\n    const currAngle = joint0TargetVec.angleTo(joint01Vec)\r\n    Joint0Axis.normalizeInPlace()\r\n\r\n    this.align.setFromAxisAndAngle(Joint0Axis, angle - currAngle)\r\n    joint0Xfo.ori = this.align.multiply(joint0Xfo.ori)\r\n\r\n    ///////////////////////////////\r\n    // Calc joint1Xfo\r\n    joint1Xfo.tr = joint0Xfo.transformVec3(this.joint1Offset)\r\n\r\n    const joint1TargetVec = targetXfo.tr.subtract(joint1Xfo.tr)\r\n    joint1TargetVec.normalizeInPlace()\r\n    this.align.setFrom2Vectors(joint1Xfo.ori.rotateVec3(this.joint1TargetOffset), joint1TargetVec)\r\n    joint1Xfo.ori = this.align.multiply(joint1Xfo.ori)\r\n\r\n    ///////////////////////////////\r\n    // Done\r\n    joint0Output.setClean(joint0Xfo)\r\n    joint1Output.setClean(joint1Xfo)\r\n  }\r\n}\r\n\r\nRegistry.register('TriangleIKSolver', TriangleIKSolver)\r\n\r\nexport { TriangleIKSolver }\r\n","import {\r\n  Quat,\r\n  NumberParameter,\r\n  Operator,\r\n  OperatorInput,\r\n  OperatorOutput,\r\n  Registry,\r\n  Xfo,\r\n  Vec3,\r\n  Material,\r\n  GeomItem,\r\n  TreeItem,\r\n  Lines,\r\n  Color,\r\n  MathFunctions,\r\n} from '@zeainc/zea-engine'\r\n\r\nconst X_AXIS = new Vec3(1, 0, 0)\r\nconst Y_AXIS = new Vec3(0, 1, 0)\r\nconst Z_AXIS = new Vec3(0, 0, 1)\r\nconst identityXfo = new Xfo()\r\nconst identityQuat = new Quat()\r\n\r\nconst generateDebugLines = (debugTree, color) => {\r\n  const line = new Lines()\r\n  const linepositions = line.getVertexAttribute('positions')\r\n\r\n  const mat = new Material('debug', 'LinesShader')\r\n  mat.getParameter('BaseColor').setValue(new Color(color))\r\n  mat.getParameter('Overlay').setValue(1)\r\n\r\n  const debugGeomItem = new GeomItem('Pointer', line, mat)\r\n  debugTree.addChild(debugGeomItem)\r\n\r\n  let numDebugSegments = 0\r\n  let numDebugPoints = 0\r\n\r\n  return {\r\n    addDebugSegment: (p0, p1) => {\r\n      const pid0 = numDebugPoints\r\n      const pid1 = numDebugPoints + 1\r\n      numDebugSegments++\r\n      numDebugPoints += 2\r\n      if (line.getNumVertices() < numDebugPoints) line.setNumVertices(numDebugPoints)\r\n      if (line.getNumSegments() < numDebugSegments) line.setNumSegments(numDebugSegments)\r\n      line.setSegmentVertexIndices(numDebugSegments - 1, pid0, pid1)\r\n      linepositions.getValueRef(pid0).setFromOther(p0)\r\n      linepositions.getValueRef(pid1).setFromOther(p1)\r\n    },\r\n    doneFrame: () => {\r\n      line.emit('geomDataTopologyChanged')\r\n      numDebugSegments = 0\r\n      numDebugPoints = 0\r\n    },\r\n  }\r\n}\r\n\r\nclass IKJoint {\r\n  constructor(index, axisId = 0, limits, solverDebugTree) {\r\n    this.index = index\r\n    this.axisId = axisId\r\n    this.limits = [MathFunctions.degToRad(limits[0]), MathFunctions.degToRad(limits[1])]\r\n    this.backPropagationWeight = 0.0\r\n    this.align = new Quat()\r\n\r\n    this.debugTree = new TreeItem('IKJoint' + index)\r\n    solverDebugTree.addChild(this.debugTree)\r\n    this.debugLines = {}\r\n  }\r\n\r\n  addDebugSegment(color, p0, p1) {\r\n    if (!this.debugLines[color]) {\r\n      this.debugLines[color] = generateDebugLines(this.debugTree, color)\r\n    }\r\n    this.debugLines[color].addDebugSegment(p0, p1)\r\n  }\r\n\r\n  init(parentXfo, index, numJoints) {\r\n    this.xfo = this.output.getValue().clone() // until we have an IO output\r\n    this.localXfo = parentXfo.inverse().multiply(this.xfo)\r\n    this.bindLocalXfo = this.localXfo.clone()\r\n\r\n    this.backPropagationWeight = index / (numJoints - 1)\r\n\r\n    switch (this.axisId) {\r\n      case 0:\r\n        this.axis = X_AXIS\r\n        break\r\n      case 1:\r\n        this.axis = Y_AXIS\r\n        break\r\n      case 2:\r\n        this.axis = Z_AXIS\r\n        break\r\n    }\r\n  }\r\n\r\n  backPropagateOrientation(baseXfo, targetXfo, index, joints) {\r\n    if (index == joints.length - 1) {\r\n      this.xfo.ori = targetXfo.ori.clone()\r\n    }\r\n\r\n    ///////////////////////\r\n    // Apply joint constraint.\r\n    // const backPropagationWeight = Math.max(0, index / (joints.length - 1) - 0.5)\r\n    if (this.backPropagationWeight > 0) {\r\n      const parentJoint = joints[index - 1]\r\n      const globalAxis = this.xfo.ori.rotateVec3(this.axis)\r\n      const parentGlobalAxis = (index > 0 ? parentJoint.xfo : baseXfo).ori.rotateVec3(this.axis)\r\n      // this.addDebugSegment('#FF0000', this.xfo.tr, this.xfo.tr.add(globalAxis.scale(-0.2)))\r\n      // this.addDebugSegment('#FFFF00', this.xfo.tr, this.xfo.tr.add(parentGlobalAxis.scale(-0.2)))\r\n\r\n      this.align.setFrom2Vectors(globalAxis, parentGlobalAxis)\r\n      if (this.backPropagationWeight == 1.0) {\r\n        parentJoint.xfo.ori = this.align.conjugate().multiply(parentJoint.xfo.ori)\r\n        parentJoint.xfo.ori.normalizeInPlace()\r\n      } else {\r\n        // We propagate the alignment up the chain by rotating our parent.\r\n        const parentAlign = this.align.lerp(identityQuat, this.backPropagationWeight).conjugate()\r\n        parentJoint.xfo.ori = parentAlign.multiply(parentJoint.xfo.ori)\r\n        this.xfo.ori = this.align.lerp(identityQuat, 1 - this.backPropagationWeight).multiply(this.xfo.ori)\r\n      }\r\n    } else {\r\n      const globalAxis = this.xfo.ori.rotateVec3(this.axis)\r\n      const parentGlobalAxis = (index > 0 ? joints[index - 1].xfo : baseXfo).ori.rotateVec3(this.axis)\r\n      this.align.setFrom2Vectors(globalAxis, parentGlobalAxis)\r\n      this.xfo.ori = this.align.multiply(this.xfo.ori)\r\n    }\r\n  }\r\n\r\n  forwardPropagateAlignment(baseXfo, targetXfo, index, joints) {\r\n    ///////////////////////\r\n    // Aim sub-chain at target\r\n    {\r\n      const targetVec = targetXfo.tr.subtract(this.xfo.tr)\r\n      const jointToTip = joints[joints.length - 1].xfo.tr.subtract(this.xfo.tr)\r\n\r\n      if (jointToTip.length() > 0.0001 && targetVec.length() > 0.0001) {\r\n        jointToTip.normalizeInPlace()\r\n        targetVec.normalizeInPlace()\r\n        this.align.setFrom2Vectors(jointToTip, targetVec)\r\n        this.xfo.ori = this.align.multiply(this.xfo.ori)\r\n        // this.addDebugSegment('#FF0000', this.xfo.tr, this.xfo.tr.add(jointToTip))\r\n        // this.addDebugSegment('#FFFF00', this.xfo.tr, this.xfo.tr.add(targetVec))\r\n      }\r\n    }\r\n    this.xfo.ori.normalizeInPlace()\r\n\r\n    ///////////////////////\r\n    // Apply joint constraint.\r\n    {\r\n      const globalAxis = this.xfo.ori.rotateVec3(this.axis)\r\n      const parentGlobalAxis = (index > 0 ? joints[index - 1].xfo : baseXfo).ori.rotateVec3(this.axis)\r\n      this.align.setFrom2Vectors(globalAxis, parentGlobalAxis)\r\n      this.xfo.ori = this.align.multiply(this.xfo.ori)\r\n    }\r\n\r\n    ///////////////////////\r\n    // Apply angle Limits.\r\n    {\r\n      const parentXfo = index > 0 ? joints[index - 1].xfo : baseXfo\r\n      const deltaQuat = parentXfo.ori.inverse().multiply(this.xfo.ori)\r\n\r\n      let currAngle = deltaQuat.w < 1.0 ? deltaQuat.getAngle() : 0.0\r\n\r\n      const deltaAxis = new Vec3(deltaQuat.x, deltaQuat.y, deltaQuat.x)\r\n      if (this.axis.dot(deltaAxis) > 0.0) currAngle = -currAngle\r\n\r\n      if (currAngle < this.limits[0] || currAngle > this.limits[1]) {\r\n        const deltaAngle = currAngle < this.limits[0] ? this.limits[0] - currAngle : this.limits[1] - currAngle\r\n        this.align.setFromAxisAndAngle(this.axis, -deltaAngle)\r\n        this.xfo.ori = this.xfo.ori.multiply(this.align)\r\n      }\r\n    }\r\n\r\n    {\r\n      let parentXfo = this.xfo\r\n      for (let i = index + 1; i < joints.length; i++) {\r\n        const joint = joints[i]\r\n        joint.xfo.ori = parentXfo.ori.multiply(joint.localXfo.ori)\r\n        joint.xfo.tr = parentXfo.transformVec3(joint.localXfo.tr)\r\n        parentXfo = joint.xfo\r\n      }\r\n    }\r\n  }\r\n\r\n  setClean() {\r\n    for (let key in this.debugLines) this.debugLines[key].doneFrame()\r\n    this.output.setClean(this.xfo)\r\n  }\r\n}\r\n\r\n/** An operator for aiming items at targets.\r\n * @extends Operator\r\n */\r\nclass IKSolver extends Operator {\r\n  /**\r\n   * Create a gears operator.\r\n   * @param {string} name - The name value.\r\n   */\r\n  constructor(name) {\r\n    super(name)\r\n\r\n    this.addParameter(new NumberParameter('Iterations', 5))\r\n    this.addInput(new OperatorInput('Base'))\r\n    this.addInput(new OperatorInput('Target'))\r\n    this.joints = []\r\n    this.enabled = false\r\n\r\n    this.debugTree = new TreeItem('IKSolver-debug')\r\n  }\r\n\r\n  addJoint(globalXfoParam, axisId = 0, limits = [-180, 180]) {\r\n    const joint = new IKJoint(this.joints.length, axisId, limits, this.debugTree)\r\n\r\n    const output = this.addOutput(new OperatorOutput('Joint' + this.joints.length))\r\n    output.setParam(globalXfoParam)\r\n    joint.output = output\r\n\r\n    this.joints.push(joint)\r\n    return joint\r\n  }\r\n\r\n  enable() {\r\n    const baseXfo = this.getInput('Base').isConnected() ? this.getInput('Base').getValue() : identityXfo\r\n    this.joints.forEach((joint, index) => {\r\n      const parentXfo = index > 0 ? this.joints[index - 1].xfo : baseXfo\r\n      joint.init(parentXfo, index, this.joints.length)\r\n    })\r\n    this.enabled = true\r\n    this.setDirty()\r\n  }\r\n\r\n  /**\r\n   * The evaluate method.\r\n   */\r\n  evaluate() {\r\n    if (!this.enabled) {\r\n      return\r\n    }\r\n    const targetXfo = this.getInput('Target').getValue()\r\n    const baseXfo = this.getInput('Base').isConnected() ? this.getInput('Base').getValue() : identityXfo\r\n\r\n    const iterations = this.getParameter('Iterations').getValue()\r\n    const numJoints = this.joints.length\r\n\r\n    for (let i = 0; i < iterations; i++) {\r\n      for (let j = numJoints - 1; j >= 0; j--) {\r\n        const joint = this.joints[j]\r\n        joint.backPropagateOrientation(baseXfo, targetXfo, j, this.joints)\r\n      }\r\n\r\n      {\r\n        let parentXfo = this.joints[0].xfo\r\n        for (let i = 1; i < this.joints.length; i++) {\r\n          const joint = this.joints[i]\r\n          joint.localXfo.ori = parentXfo.ori.inverse().multiply(joint.xfo.ori)\r\n          joint.xfo.ori = parentXfo.ori.multiply(joint.localXfo.ori)\r\n          joint.xfo.tr = parentXfo.transformVec3(joint.localXfo.tr)\r\n          parentXfo = joint.xfo\r\n        }\r\n      }\r\n      {\r\n        for (let j = 0; j < this.joints.length; j++) {\r\n          const joint = this.joints[j]\r\n          joint.forwardPropagateAlignment(baseXfo, targetXfo, j, this.joints)\r\n        }\r\n      }\r\n    }\r\n\r\n    // Now store the value to the connected Xfo parameter.\r\n    for (let i = 0; i < numJoints; i++) {\r\n      this.joints[i].setClean()\r\n    }\r\n  }\r\n}\r\n\r\nRegistry.register('IKSolver', IKSolver)\r\n\r\nexport { IKSolver }\r\n","import { Xfo, Operator, OperatorInput, OperatorOutput, OperatorOutputMode, Registry } from '@zeainc/zea-engine'\r\n\r\n/** An operator for aiming items at targets.\r\n * @extends Operator\r\n */\r\nclass AttachmentConstraint extends Operator {\r\n  /**\r\n   * Create a gears operator.\r\n   * @param {string} name - The name value.\r\n   */\r\n  constructor(name) {\r\n    super(name)\r\n\r\n    console.log('AttachmentConstraint')\r\n\r\n    this.addInput(new OperatorInput('Time'))\r\n    this.addOutput(new OperatorOutput('Attached', OperatorOutputMode.OP_READ_WRITE))\r\n\r\n    this.__attachTargets = []\r\n    this.__attachId = -1\r\n  }\r\n\r\n  addAttachTarget(target, time) {\r\n    const input = this.addInput(new OperatorInput('Target' + this.getNumInputs()))\r\n    input.setParam(target)\r\n\r\n    this.__attachTargets.push({\r\n      input,\r\n      time,\r\n      offsetXfo: undefined,\r\n    })\r\n  }\r\n\r\n  getAttachTarget(attachId) {\r\n    return this.getInputByIndex(attachId + 1)\r\n  }\r\n\r\n  findTarget(time) {\r\n    if (this.__attachTargets.length == 0 || time <= this.__attachTargets[0].time) {\r\n      return -1\r\n    }\r\n    const numKeys = this.__attachTargets.length\r\n    if (time >= this.__attachTargets[numKeys - 1].time) {\r\n      return numKeys - 1\r\n    }\r\n    // Find the first key after the specified time value\r\n    for (let i = 1; i < numKeys; i++) {\r\n      const key = this.__attachTargets[i]\r\n      if (key.time > time) {\r\n        return i - 1\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The evaluate method.\r\n   */\r\n  evaluate() {\r\n    const time = this.getInput('Time').getValue()\r\n    const output = this.getOutputByIndex(0)\r\n    let xfo = output.getValue()\r\n\r\n    const attachId = this.findTarget(time)\r\n    if (attachId != -1) {\r\n      const currXfo = this.getAttachTarget(attachId).getValue()\r\n      const attachment = this.__attachTargets[attachId]\r\n\r\n      if (attachId != this.__attachId) {\r\n        if (!attachment.offsetXfo) {\r\n          if (this.__attachId == -1) {\r\n            attachment.offsetXfo = currXfo.inverse().multiply(xfo)\r\n          } else {\r\n            const prevXfo = this.getAttachTarget(this.__attachId).getValue()\r\n            const prevOffset = this.__attachTargets[this.__attachId].offsetXfo\r\n            const offsetXfo = currXfo.inverse().multiply(prevXfo.multiply(prevOffset))\r\n            attachment.offsetXfo = offsetXfo\r\n          }\r\n        }\r\n        this.__attachId = attachId\r\n      }\r\n\r\n      xfo = currXfo.multiply(attachment.offsetXfo)\r\n    }\r\n\r\n    output.setClean(xfo)\r\n  }\r\n}\r\n\r\nRegistry.register('AttachmentConstraint', AttachmentConstraint)\r\n\r\nexport { AttachmentConstraint }\r\n","import { EventEmitter, Vec2, Registry } from '@zeainc/zea-engine'\r\n\r\n/** Class representing a gear parameter.\r\n * @extends BaseTrack\r\n */\r\nclass BaseTrack extends EventEmitter {\r\n  constructor(name, owner) {\r\n    super()\r\n    this.name = name\r\n    this.owner = owner\r\n    this.keys = []\r\n    this.__sampleCache = {}\r\n\r\n    this.__currChange = null\r\n    this.__secondaryChange = null\r\n    this.__secondaryChangeTime = -1\r\n  }\r\n\r\n  getName() {\r\n    return this.name\r\n  }\r\n\r\n  getOwner() {\r\n    return this.owner\r\n  }\r\n\r\n  setOwner(owner) {\r\n    this.owner = owner\r\n  }\r\n\r\n  getPath() {\r\n    return [...this.owner.getPath(), name]\r\n  }\r\n\r\n  getNumKeys() {\r\n    return this.keys.length\r\n  }\r\n\r\n  getKeyTime(index) {\r\n    return this.keys[index].time\r\n  }\r\n\r\n  getKeyValue(index) {\r\n    return this.keys[index].value\r\n  }\r\n\r\n  setKeyValue(index, value) {\r\n    this.keys[index].value = value\r\n    this.emit('keyChanged', { index })\r\n  }\r\n\r\n  setKeyTimeAndValue(index, time, value) {\r\n    this.keys[index].time = time\r\n    this.keys[index].value = value\r\n    this.emit('keyChanged', { index })\r\n  }\r\n\r\n  getTimeRange() {\r\n    if (this.keys.length == 0) {\r\n      return new Vec2(Number.NaN, Number.NaN)\r\n    }\r\n    const numKeys = this.keys.length\r\n    return new Vec2(this.keys[0].time, this.keys[numKeys - 1].time)\r\n  }\r\n\r\n  addKey(time, value) {\r\n    let index\r\n    const numKeys = this.keys.length\r\n    if (this.keys.length == 0 || time < this.keys[0].time) {\r\n      this.keys.splice(0, 0, { time, value })\r\n      index = 0\r\n    } else {\r\n      if (time > this.keys[numKeys - 1].time) {\r\n        this.keys.push({ time, value })\r\n        index = numKeys\r\n      } else {\r\n        // Find the first key after the specified time value\r\n        for (let i = 1; i < numKeys; i++) {\r\n          const key = this.keys[i]\r\n          if (key.time > time) {\r\n            this.keys.splice(i, 0, { time, value })\r\n            index = i\r\n            break\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    this.emit('keyAdded', { index })\r\n    return index\r\n  }\r\n\r\n  updateKey(index, value) {\r\n    this.keys[index].value = value\r\n    this.emit('keyUpdated', { index })\r\n  }\r\n\r\n  removeKey(index) {\r\n    // const undoRedoManager = UndoRedoManager.getInstance()\r\n    // const change = undoRedoManager.getCurrentChange()\r\n    // if (change) {\r\n    //   if (this.__currChange != change || this.__secondaryChangeTime != time) {\r\n    //     this.__currChange = change\r\n    //     this.__secondaryChangeTime = time\r\n    //   }\r\n    // }\r\n    this.keys.splice(index, 1)\r\n    this.emit('keyRemoved', { index })\r\n  }\r\n\r\n  findKeyAndLerp(time) {\r\n    if (this.keys.length == 0) {\r\n      return {\r\n        keyIndex: -1,\r\n        lerp: 0,\r\n      }\r\n    }\r\n    if (time <= this.keys[0].time) {\r\n      return {\r\n        keyIndex: 0,\r\n        lerp: 0,\r\n      }\r\n    }\r\n    const numKeys = this.keys.length\r\n    if (time >= this.keys[numKeys - 1].time) {\r\n      return {\r\n        keyIndex: numKeys - 1,\r\n        lerp: 0,\r\n      }\r\n    }\r\n    // Find the first key after the given time value\r\n    for (let i = 1; i < numKeys; i++) {\r\n      const key = this.keys[i]\r\n      if (time < key.time) {\r\n        const prevKey = this.keys[i - 1]\r\n        const delta = key.time - prevKey.time\r\n        return {\r\n          keyIndex: i - 1,\r\n          lerp: (time - prevKey.time) / delta,\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  evaluate(time) {\r\n    const keyAndLerp = this.findKeyAndLerp(time)\r\n  }\r\n\r\n  setValue(time, value) {\r\n    // const undoRedoManager = UndoRedoManager.getInstance()\r\n    // const change = undoRedoManager.getCurrentChange()\r\n    // if (change) {\r\n    //   if (this.__currChange != change || this.__secondaryChangeTime != time) {\r\n    //     this.__currChange = change\r\n    //     this.__secondaryChangeTime = time\r\n\r\n    //     const keyAndLerp = this.findKeyAndLerp(time)\r\n    //     if (keyAndLerp.lerp > 0.0) {\r\n    //       this.__secondaryChange = new AddKeyChange(this, time, value)\r\n    //       this.__currChange.secondaryChanges.push(this.__secondaryChange)\r\n    //     } else {\r\n    //       this.__secondaryChange = new KeyChange(this, keyAndLerp.keyIndex, value)\r\n    //       this.__currChange.secondaryChanges.push(this.__secondaryChange)\r\n    //     }\r\n    //   } else {\r\n    //     this.__secondaryChange.update(value)\r\n    //   }\r\n    // }\r\n\r\n    const keyAndLerp = this.findKeyAndLerp(time)\r\n    if (keyAndLerp.lerp > 0.0) {\r\n      this.addKey(time, value)\r\n    } else {\r\n      this.setKeyValue(keyAndLerp.keyIndex, value)\r\n    }\r\n  }\r\n\r\n  // ////////////////////////////////////////\r\n  // Persistence\r\n\r\n  /**\r\n   * Encodes the current object as a json object.\r\n   *\r\n   * @param {object} context - The context value.\r\n   * @return {object} - Returns the json object.\r\n   */\r\n  toJSON(context) {\r\n    const j = {}\r\n    j.name = this.name\r\n    j.type = Registry.getBlueprintName(this)\r\n    j.keys = this.keys.map((key) => {\r\n      return { time: key.time, value: key.value.toJSON ? key.value.toJSON() : key.value }\r\n    })\r\n    return j\r\n  }\r\n\r\n  /**\r\n   * Decodes a json object for this type.\r\n   *\r\n   * @param {object} j - The json object this item must decode.\r\n   * @param {object} context - The context value.\r\n   */\r\n  fromJSON(j, context) {\r\n    this.__name = j.name\r\n    this.keys = j.keys.map((keyJson) => this.loadKeyJSON(keyJson))\r\n    this.emit('loaded')\r\n  }\r\n\r\n  loadKeyJSON(json) {\r\n    const key = {\r\n      time: json.time,\r\n      value: json.value,\r\n    }\r\n    return key\r\n  }\r\n}\r\n\r\nexport { BaseTrack }\r\nexport default BaseTrack\r\n","import { Color } from '@zeainc/zea-engine'\r\nimport { BaseTrack } from './BaseTrack'\r\n\r\nclass ColorTrack extends BaseTrack {\r\n  constructor(name) {\r\n    super(name)\r\n  }\r\n\r\n  evaluate(time) {\r\n    const keyAndLerp = this.findKeyAndLerp(time)\r\n\r\n    const value0 = this.keys[keyAndLerp.keyIndex].value\r\n    if (keyAndLerp.lerp > 0.0) {\r\n      const value1 = this.keys[keyAndLerp.keyIndex + 1].value\r\n      return value0.lerp(value1, keyAndLerp.lerp)\r\n    } else {\r\n      return value0\r\n    }\r\n  }\r\n}\r\n\r\nexport { ColorTrack }\r\n","import { Xfo, Registry } from '@zeainc/zea-engine'\r\nimport { BaseTrack } from './BaseTrack'\r\n\r\nclass XfoTrack extends BaseTrack {\r\n  constructor(name) {\r\n    super(name)\r\n  }\r\n\r\n  evaluate(time) {\r\n    const keyAndLerp = this.findKeyAndLerp(time)\r\n\r\n    const value0 = this.keys[keyAndLerp.keyIndex].value\r\n    if (keyAndLerp.lerp > 0.0) {\r\n      const value1 = this.keys[keyAndLerp.keyIndex + 1].value\r\n      const tr = value0.tr.lerp(value1.tr, keyAndLerp.lerp)\r\n      const ori = value0.ori.lerp(value1.ori, keyAndLerp.lerp)\r\n      return new Xfo(tr, ori)\r\n    } else {\r\n      return value0\r\n    }\r\n  }\r\n\r\n  loadKeyJSON(json) {\r\n    const key = {\r\n      time: json.time,\r\n      value: new Xfo()\r\n    }\r\n    key.value.fromJSON(json.value)\r\n    return key\r\n  }\r\n}\r\n\r\nRegistry.register('XfoTrack', XfoTrack)\r\n\r\nexport { XfoTrack }\r\n","import { Change, UndoRedoManager } from '@zeainc/zea-ux'\r\nimport BaseTrack from './BaseTrack.js'\r\n\r\nclass AddKeyChange extends Change {\r\n  constructor(track, time, value) {\r\n    super(`Add Key to ${track ? track.getName() : 'track'}`)\r\n\r\n    if (track != undefined && time != undefined && value != undefined) {\r\n      this.track = track\r\n      this.time = time\r\n      this.value = value\r\n      this.index = track.addKey(this.time, this.value)\r\n    } else {\r\n      super()\r\n    }\r\n  }\r\n\r\n  update(value) {\r\n    this.value = value\r\n    this.track.setKeyValue(this.index, this.value)\r\n\r\n    this.emit('updated', {\r\n      value: this.value\r\n    })\r\n  }\r\n\r\n  undo() {\r\n    this.track.removeKey(this.index)\r\n  }\r\n\r\n  redo() {\r\n    this.track.addKey(this.time, this.value)\r\n  }\r\n\r\n  /**\r\n   * Serializes `Parameter` instance value as a JSON object, allowing persistence/replication.\r\n   *\r\n   * @param {object} context - The context param.\r\n   * @return {object} The return value.\r\n   */\r\n  toJSON(context) {\r\n    const j = {\r\n      name: this.name,\r\n      trackPath: this.track.getPath(),\r\n      time: this.time\r\n    }\r\n\r\n    if (this.value != undefined) {\r\n      if (this.value.toJSON) {\r\n        j.value = this.value.toJSON()\r\n      } else {\r\n        j.value = this.value\r\n      }\r\n    }\r\n    return j\r\n  }\r\n\r\n  /**\r\n   * Restores `Parameter` instance's state with the specified JSON object.\r\n   *\r\n   * @param {object} j - The j param.\r\n   * @param {object} context - The context param.\r\n   */\r\n  fromJSON(j, context) {\r\n    const track = context.appData.scene.getRoot().resolvePath(j.trackPath, 1)\r\n    if (!track || !(track instanceof BaseTrack)) {\r\n      console.warn('resolvePath is unable to resolve', j.trackPath)\r\n      return\r\n    }\r\n    this.name = `Add Key to ${track.getName()}`\r\n    this.track = track\r\n    const key = this.track.loadKeyJSON(j)\r\n    this.time = key.time\r\n    this.value = key.value\r\n    this.index = this.track.addKey(key.time, key.value)\r\n  }\r\n\r\n  /**\r\n   * Updates the state of an existing identified `Parameter` through replication.\r\n   *\r\n   * @param {object} j - The j param.\r\n   */\r\n  changeFromJSON(j) {\r\n    if (!this.track) return\r\n    if (j.value) {\r\n      this.value = j.value\r\n      this.track.setKeyValue(this.index, this.value)\r\n    }\r\n  }\r\n}\r\n\r\nUndoRedoManager.registerChange('AddKeyChange', AddKeyChange)\r\n\r\nexport default AddKeyChange\r\nexport { AddKeyChange }\r\n","import { Change, UndoRedoManager } from '@zeainc/zea-ux'\r\n\r\nclass KeyChange extends Change {\r\n  constructor(track, index, value, time) {\r\n    super()\r\n    if (track != undefined && index != undefined && value != undefined) {\r\n      this.track = track\r\n      this.index = index\r\n      this.prevValue = this.track.getKeyValue(this.index)\r\n      this.newValue = value\r\n      if (time != undefined) {\r\n        this.newTime = time\r\n        this.track.setKeyTimeAndValue(this.index, this.newTime, this.newValue)\r\n      } else {\r\n        this.newTime = this.track.getKeyTime(this.index)\r\n        this.track.setKeyValue(this.index, this.newValue)\r\n      }\r\n    } else {\r\n      super()\r\n    }\r\n  }\r\n\r\n  update(value, time) {\r\n    this.newValue = value\r\n    if (time != undefined) {\r\n      this.newTime = time\r\n      this.track.setKeyTimeAndValue(this.index, this.newTime, this.newValue)\r\n    } else {\r\n      this.track.setKeyValue(this.index, this.newValue)\r\n    }\r\n    this.emit('updated', {\r\n      newValue: this.newValue.toJSON ? this.newValue.toJSON() : this.newValue,\r\n      newTime: this.newTime\r\n    })\r\n  }\r\n\r\n  undo() {\r\n    this.track.setKeyValue(this.index, this.prevValue)\r\n  }\r\n\r\n  redo() {\r\n    this.track.setKeyValue(this.index, this.newValue)\r\n  }\r\n\r\n  toJSON(context) {\r\n    const j = {\r\n      name: this.name,\r\n      trackPath: this.track.getPath(),\r\n      newTime: this.newTime,\r\n      newValue: this.newValue\r\n    }\r\n    return j\r\n  }\r\n\r\n  fromJSON(j, context) {\r\n    const track = context.appData.scene.getRoot().resolvePath(j.trackPath, 1)\r\n    if (!track || !(track instanceof BaseTrack)) {\r\n      console.warn('resolvePath is unable to resolve', j.trackPath)\r\n      return\r\n    }\r\n    this.name = `Add Key to ${track.getName()}`\r\n    this.track = track\r\n    const key = this.track.loadKeyJSON(j)\r\n    this.index = key.index\r\n    this.newTime = key.time\r\n    this.newValue = key.newValue\r\n    this.track.setKeyTimeAndValue(this.index, this.newTime, this.newValue)\r\n  }\r\n\r\n  changeFromJSON(j) {\r\n    if (!this.track) return\r\n    const key = this.track.loadKeyJSON(j)\r\n    this.newTime = key.time\r\n    this.newValue = key.newValue\r\n    this.track.setKeyTimeAndValue(this.index, this.newTime, this.newValue)\r\n  }\r\n}\r\n\r\nUndoRedoManager.registerChange('KeyChange', KeyChange)\r\n\r\nexport default KeyChange\r\nexport { KeyChange }\r\n","import { Operator, OperatorInput, OperatorOutput, OperatorOutputMode } from '@zeainc/zea-engine'\r\nimport { UndoRedoManager } from '@zeainc/zea-ux'\r\nimport AddKeyChange from './AddKeyChange.js'\r\nimport KeyChange from './KeyChange.js'\r\n\r\n/** An operator for aiming items at targets.\r\n * @extends Operator\r\n */\r\nclass TrackSampler extends Operator {\r\n  /**\r\n   * Create a TrackSampler operator.\r\n   * @param {string} name - The name value.\r\n   */\r\n  constructor(name, track) {\r\n    super(name)\r\n\r\n    this.track = track\r\n    const setDirty = () => {\r\n      this.setDirty()\r\n    }\r\n    this.track.on('keyAdded', setDirty)\r\n    this.track.on('keyRemoved', setDirty)\r\n    this.track.on('keyChanged', setDirty)\r\n\r\n    if (!this.track.getOwner()) this.track.setOwner(this)\r\n\r\n    this.addInput(new OperatorInput('Time'))\r\n    this.addOutput(new OperatorOutput('Output', OperatorOutputMode.OP_WRITE))\r\n\r\n    this.__initialValue = null\r\n    this.__currChange = null\r\n    this.__secondaryChange = null\r\n    this.__secondaryChangeTime = -1\r\n\r\n    this.getOutput('Output').on('paramSet', () => {\r\n      this.__initialValue = this.getOutput('Output').getValue()\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @param {Xfo} value - The value param.\r\n   * @return {any} - The modified value.\r\n   */\r\n  backPropagateValue(value) {\r\n    const time = this.getInput('Time').getValue()\r\n    // this.track.setValue(time, value)\r\n\r\n    const undoRedoManager = UndoRedoManager.getInstance()\r\n    const change = undoRedoManager.getCurrentChange()\r\n    if (change && change.addSecondaryChange) {\r\n      if (this.__currChange != change || this.__secondaryChangeTime != time) {\r\n        this.__currChange = change\r\n        this.__secondaryChangeTime = time\r\n\r\n        const keyAndLerp = this.track.findKeyAndLerp(time)\r\n        if (\r\n          keyAndLerp.keyIndex == -1 ||\r\n          keyAndLerp.lerp > 0.0 ||\r\n          (keyAndLerp.keyIndex == this.track.getNumKeys() - 1 && this.track.getKeyTime(keyAndLerp.keyIndex) != time)\r\n        ) {\r\n          this.__secondaryChange = new AddKeyChange(this.track, time, value)\r\n          this.__currChange.addSecondaryChange(this.__secondaryChange)\r\n        } else {\r\n          this.__secondaryChange = new KeyChange(this.track, keyAndLerp.keyIndex, value)\r\n          this.__currChange.addSecondaryChange(this.__secondaryChange)\r\n        }\r\n      } else {\r\n        this.__secondaryChange.update(value)\r\n      }\r\n    } else {\r\n      const keyAndLerp = this.track.findKeyAndLerp(time)\r\n      if (\r\n        keyAndLerp.keyIndex == -1 ||\r\n        keyAndLerp.lerp > 0.0 ||\r\n        (keyAndLerp.keyIndex == this.track.getNumKeys() - 1 && this.track.getKeyTime(keyAndLerp.keyIndex) != time)\r\n      ) {\r\n        this.track.addKey(time, value)\r\n      } else {\r\n        this.track.setKeyValue(keyAndLerp.keyIndex, value)\r\n      }\r\n    }\r\n\r\n    return value\r\n  }\r\n\r\n  /**\r\n   * The evaluate method.\r\n   */\r\n  evaluate() {\r\n    const output = this.getOutputByIndex(0)\r\n    if (this.track.getNumKeys() == 0) {\r\n      if (output.isConnected()) {\r\n        // output.setClean(this.__initialValue)\r\n        output.setClean(this.getOutput('Output').getValue())\r\n      }\r\n    } else {\r\n      const time = this.getInput('Time').getValue()\r\n\r\n      const xfo = this.track.evaluate(time)\r\n      output.setClean(xfo)\r\n    }\r\n  }\r\n}\r\n\r\nexport { TrackSampler }\r\n","import {\r\n  Color,\r\n  GeomItem,\r\n  Lines,\r\n  Cuboid,\r\n  Points,\r\n  Material,\r\n  Operator,\r\n  OperatorOutput,\r\n  OperatorOutputMode,\r\n} from '@zeainc/zea-engine'\r\nimport { BaseTrack } from './BaseTrack'\r\n\r\n/** An operator for aiming items at targets.\r\n * @extends Operator\r\n */\r\nclass KeyDisplayOperator extends Operator {\r\n  /**\r\n   * Create a gears operator.\r\n   * @param {BaseTrack} track - The track value.\r\n   * @param {number} keyIndex - The index of the key in the track\r\n   */\r\n  constructor(track, keyIndex) {\r\n    super(name)\r\n\r\n    this.addOutput(new OperatorOutput('KeyLocal', OperatorOutputMode.OP_WRITE))\r\n\r\n    this.track = track\r\n    this.keyIndex = keyIndex\r\n    this.track.on('keyChanged', (event) => {\r\n      if (event.index == this.keyIndex) this.setDirty()\r\n    })\r\n    this.track.on('keyRemoved', (event) => {\r\n      const { index } = event\r\n      if (this.keyIndex >= index) {\r\n        this.setDirty()\r\n      }\r\n    })\r\n    this.track.on('keyAdded', (event) => {\r\n      const { index } = event\r\n      if (this.keyIndex >= index) {\r\n        this.setDirty()\r\n      }\r\n    })\r\n  }\r\n\r\n  backPropagateValue(value) {\r\n    this.track.setKeyValue(this.keyIndex, value)\r\n  }\r\n\r\n  /**\r\n   * The evaluate method.\r\n   */\r\n  evaluate() {\r\n    this.getOutputByIndex(0).setClean(this.track.getKeyValue(this.keyIndex))\r\n  }\r\n}\r\n\r\n/** An operator for aiming items at targets.\r\n * @extends Operator\r\n */\r\nclass XfoTrackDisplay extends GeomItem {\r\n  /**\r\n   * Create a TrackDisplay operator.\r\n   * @param {string} name - The name value.\r\n   * @param {BaseTrack} track - The track to display.\r\n   */\r\n  constructor(track) {\r\n    super(track.getName())\r\n\r\n    this.track = track\r\n\r\n    this.getParameter('Geometry').setValue(new Lines())\r\n\r\n    const linesMat = new Material('trackLine', 'LinesShader')\r\n    linesMat.getParameter('BaseColor').setValue(new Color(0.3, 0.3, 0.3))\r\n    linesMat.getParameter('Overlay').setValue(0.5)\r\n    this.getParameter('Material').setValue(linesMat)\r\n\r\n    const dotsMat = new Material('trackDots', 'PointsShader')\r\n    dotsMat.getParameter('BaseColor').setValue(new Color(0.75, 0.75, 0.75))\r\n    dotsMat.getParameter('Overlay').setValue(0.5)\r\n    this.dotsItem = new GeomItem('dots', new Points(), dotsMat)\r\n    this.addChild(this.dotsItem)\r\n\r\n    this.__keyMat = new Material('trackLine', 'HandleShader')\r\n    this.__keyMat.getParameter('MaintainScreenSize').setValue(1)\r\n    this.__keyMat.getParameter('Overlay').setValue(0.5)\r\n    this.__keyCube = new Cuboid(0.004, 0.004, 0.004)\r\n\r\n    this.__keys = []\r\n    this.updatePath()\r\n    this.displayKeys()\r\n\r\n    this.track.on('keyAdded', (event) => {\r\n      this.displayKeys()\r\n      this.updatePath()\r\n    })\r\n    this.track.on('keyRemoved', (event) => {\r\n      const { index } = event\r\n      const handle = this.__keys.pop()\r\n      this.removeChild(this.getChildIndex(handle))\r\n      this.displayKeys()\r\n      this.updatePath()\r\n    })\r\n    this.track.on('keyChanged', (event) => {\r\n      this.updatePath()\r\n    })\r\n    this.track.on('loaded', (event) => {\r\n      this.updatePath()\r\n      this.displayKeys()\r\n    })\r\n  }\r\n\r\n  displayKeys() {\r\n    const displayKey = (index) => {\r\n      if (!this.__keys[index]) {\r\n        const handle = new GeomItem('key' + index, this.__keyCube, this.__keyMat)\r\n        this.addChild(handle)\r\n        const keyDisplay = new KeyDisplayOperator(this.track, index)\r\n        keyDisplay.getOutput('KeyLocal').setParam(handle.getParameter('LocalXfo'))\r\n        this.__keys.push(handle)\r\n      }\r\n    }\r\n\r\n    const numKeys = this.track.getNumKeys()\r\n    for (let i = 0; i < numKeys; i++) {\r\n      displayKey(i)\r\n    }\r\n  }\r\n\r\n  updatePath(timeRange) {\r\n    const trackLines = this.getParameter('Geometry').getValue()\r\n    const trackDots = this.dotsItem.getParameter('Geometry').getValue()\r\n\r\n    const trackTimeRange = this.track.getTimeRange()\r\n    if (Number.isNaN(trackTimeRange.x) || Number.isNaN(trackTimeRange.y)) return\r\n\r\n    const numSamples = Math.round((trackTimeRange.y - trackTimeRange.x) / 50) // Display at 50 samples per second\r\n    if (numSamples == 0) return\r\n\r\n    trackLines.setNumVertices(numSamples + 1)\r\n    trackLines.setNumSegments(numSamples)\r\n\r\n    trackDots.setNumVertices(numSamples + 1)\r\n    const linePositions = trackLines.getVertexAttribute('positions')\r\n    const dotPositions = trackDots.getVertexAttribute('positions')\r\n    for (let i = 0; i <= numSamples; i++) {\r\n      if (i < numSamples) trackLines.setSegmentVertexIndices(i, i, i + 1)\r\n      const time = trackTimeRange.x + (trackTimeRange.y - trackTimeRange.x) * (i / numSamples)\r\n      const xfo = this.track.evaluate(time)\r\n      linePositions.getValueRef(i).setFromOther(xfo.tr)\r\n      dotPositions.getValueRef(i).setFromOther(xfo.tr)\r\n    }\r\n\r\n    trackDots.setBoundingBoxDirty()\r\n    trackDots.emit('geomDataTopologyChanged', {})\r\n\r\n    trackLines.setBoundingBoxDirty()\r\n    trackLines.emit('geomDataTopologyChanged', {})\r\n  }\r\n}\r\n\r\nexport { XfoTrackDisplay }\r\n","import { Change, UndoRedoManager } from '@zeainc/zea-ux'\r\n\r\nclass RemoveKeyChange extends Change {\r\n  constructor(track, index) {\r\n    super()\r\n    this.track = track\r\n    this.index = index\r\n    this.time = track.getKeyTime(index)\r\n    this.value = track.getKeyValue(index)\r\n    this.track.removeKey(this.index)\r\n  }\r\n\r\n  undo() {\r\n    this.track.addKey(this.time, this.value)\r\n  }\r\n\r\n  redo() {\r\n    this.track.removeKey(this.index)\r\n  }\r\n}\r\n\r\nUndoRedoManager.registerChange('RemoveKeyChange', RemoveKeyChange)\r\n\r\nexport default RemoveKeyChange\r\nexport { RemoveKeyChange }\r\n","import { libsRegistry } from '@zeainc/zea-engine'\r\n\r\nimport pkg from '../package.json'\r\nif (libsRegistry) {\r\n  libsRegistry.registerLib(pkg)\r\n} else {\r\n  console.warn(\r\n    \"The version of the Zea Engine that you're using doesn't support the libraries registry. Please upgrade to the latest Zea Engine version.\"\r\n  )\r\n}\r\n\r\nexport * from './ExplodePartsOperator.js'\r\nexport * from './GearsOperator.js'\r\nexport * from './PistonOperator.js'\r\nexport * from './AimOperator.js'\r\nexport * from './RamAndPistonOperator.js'\r\nexport * from './TriangleIKSolver.js'\r\nexport * from './CCDIKSolver.js'\r\nexport * from './AttachmentConstraint.js'\r\nexport * from './Tracks/index.js'\r\n"],"names":["StructParameter","NumberParameter","Vec3Parameter","Vec3","Vec2Parameter","Vec2","MathFunctions","Operator","BooleanParameter","TreeItemParameter","ListParameter","OperatorOutput","OperatorOutputMode","Registry","Quat","Xfo","MultiChoiceParameter","OperatorInput","Lines","Material","Color","GeomItem","TreeItem","BaseTrack","EventEmitter","Change","UndoRedoManager","Points","Cuboid","libsRegistry"],"mappings":"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"}